<main class="container" role="main">
  <header class="header">
    <h1 class="header__title">Каталог фильмов</h1>
    <div class="header__search">
      <app-search-input [value]="query()" (valueChange)="updateSearchQuery($event)"
        placeholder="Поиск фильмов..."></app-search-input>
    </div>
  </header>

  <section aria-live="polite">
    <div *ngIf="isLoading" class="grid">
      <div *ngFor="let _ of skeletons" class="card skel" style="height: 320px;"></div>
    </div>

    <div *ngIf="!isLoading && (movies()?.length ?? 0) === 0" style="opacity: .8">
      <app-not-found></app-not-found>
    </div>

    <ol *ngIf="!isLoading && (movies()?.length ?? 0) > 0" class="grid" style="list-style: none; padding: 0; margin: 0;">
      <li *ngFor="let movie of movies() ?? []; let i = index; trackBy: trackByMovieId">
        <app-movie-card [movie]="movie" [isLcp]="i === 0" (open)="selectMovie(movie)"></app-movie-card>
      </li>
    </ol>
  </section>
</main>

<app-movie-modal *ngIf="selectedMovie()" [movie]="selectedMovie()!" (closed)="closeModal()"></app-movie-modal>